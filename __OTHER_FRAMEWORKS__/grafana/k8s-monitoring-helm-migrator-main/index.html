<html>
<head>
  <title>k8s-monitoring Helm Chart migration utility</title>
  <style>
      .container {
          display: flex;
          height: 80%;
      }
      .column {
          flex: 1;
          padding: 10px;
      }
      .notes {
          border: 1px solid black;
          height: 80%;
          width: 100%;
      }
      textarea {
          height: 80%;
          width: 100%;
      }
      .error {
          color: red;
          font-weight: bold;
      }
      #file-upload {
          padding: 5px;
          border: 1px solid #ccc;
          border-radius: 4px;
          width: 100%;
          box-sizing: border-box;
      }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js" integrity="sha512-CSBhVREyzHAjAFfBlIBakjoRUKp5h7VSweP0InR/pAJyptH7peuhCsqAI/snV+TwZmXZqoUklpXp6R6wMnYf5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
</head>
<body>
<h1>K8s Monitoring Helm Chart migration utility</h1>
<p>
  This utility can be used to migrate values files from v1.x to v2.0 and v3.x. It's meant to be a best-effort migration
  utility and might not result in an optimal solution, please inspect the output values file and adjust as
  necessary.
  <br />
  <br />
  For more details about migration, see <a href="https://github.com/grafana/k8s-monitoring-helm/blob/main/charts/k8s-monitoring/docs/Migration.md">the migration guide</a>.
  <br />
  <br />
  This utility will attempt to use the same default values in v1, even though they're not the same defaults in v2 or v3.
</p>
<div class="container" style="height: auto; margin-bottom: 10px;">
  <div class="column">
    <label for="file-upload" style="display: block; margin-bottom: 5px; font-weight: bold;">Upload v1 values.yaml file:</label>
    <input type="file" id="file-upload" accept=".yaml,.yml" />
  </div>
  <div class="column"></div>
  <div class="column"></div>
</div>
<div class="container">
  <div class="column">
    <h2>values.yaml (v1)</h2>
    <textarea id="left-textarea"></textarea>
  </div>
  <div class="column">
    <h2>values.yaml (v2/v3)</h2>
    <textarea id="right-textarea"></textarea>
  </div>
  <div class="column">
    <h2>Notes</h2>
    <div class="notes">
      <ul id="notesList" ></ul>
    </div>
  </div>
</div>

<script src="./migrate.js"></script>
<script src="./web.js"></script>
</body>
</html>
